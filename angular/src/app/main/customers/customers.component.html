<div class="card">
  <div class="card-body">
    <div class="row mb-3">
      <div class="col-md-5">
        <input
          [(ngModel)]="keyword"
          (keyup.enter)="onSearch()"
          class="form-control"
          placeholder="Search by name, email, or address"
        />
      </div>
      <div class="col-md-7 text-end">
        <button class="btn btn-primary me-2" (click)="onSearch()">Search</button>
        <button class="btn btn-success" (click)="createCustomer()">+ Add Customer</button>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered table-striped mb-0">
        <thead class="table-light">
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Address</th>
            <th>Registration Date</th>
            <th>User</th>
            <th style="width: 120px">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let customer of customers">
            <td>{{ customer.name }}</td>
            <td>{{ customer.email }}</td>
            <td>{{ customer.phoneNo }}</td>
            <td>{{ customer.address }}</td>
            <td>{{ customer.registrationDate | date: 'shortDate' }}</td>
            <td>{{ customer.userName }}</td>
            <td>
              <button class="btn btn-sm btn-info me-1" (click)="editCustomer(customer.id)">✏️</button>
              <button class="btn btn-sm btn-danger me-1" (click)="deleteCustomer(customer.id)">🗑️</button>
              <button class="btn btn-sm btn-secondary" (click)="viewUsers(customer.id)">👁️</button>
            </td>
          </tr>
          <tr *ngIf="customers.length === 0">
            <td colspan="7" class="text-center py-3">No records found.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination Controls -->
    <nav class="mt-3" *ngIf="totalCount > maxResultCount">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="skipCount === 0">
          <button class="page-link" (click)="changePage({pageIndex: 0, pageSize: maxResultCount})">First</button>
        </li>
        <li class="page-item" [class.disabled]="skipCount === 0">
          <button class="page-link" (click)="changePage({pageIndex: (skipCount/maxResultCount)-1, pageSize: maxResultCount})">Previous</button>
        </li>
        <li class="page-item disabled">
          <span class="page-link">
            Page {{ (skipCount/maxResultCount)+1 }} of {{ Math.ceil(totalCount/maxResultCount) }}
          </span>
        </li>
        <li class="page-item" [class.disabled]="skipCount + maxResultCount >= totalCount">
          <button class="page-link" (click)="changePage({pageIndex: (skipCount/maxResultCount)+1, pageSize: maxResultCount})">Next</button>
        </li>
        <li class="page-item" [class.disabled]="skipCount + maxResultCount >= totalCount">
          <button class="page-link" (click)="changePage({pageIndex: Math.ceil(totalCount/maxResultCount)-1, pageSize: maxResultCount})">Last</button>
        </li>
      </ul>
    </nav>
  </div>
</div>
